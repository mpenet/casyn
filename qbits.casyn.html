<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>qbits.casyn documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Casyn 1.0.0-rc6 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="qbits.casyn.html"><span>qbits.casyn</span></a></li><li><a href="qbits.casyn.api.html"><span>qbits.casyn.api</span></a></li><li><a href="qbits.casyn.auto-discovery.html"><span>qbits.casyn.auto-discovery</span></a></li><li><a href="qbits.casyn.balancer.html"><span>qbits.casyn.balancer</span></a></li><li><a href="qbits.casyn.balancer.least-loaded.html"><span>qbits.casyn.balancer.least-loaded</span></a></li><li><a href="qbits.casyn.balancer.round-robin.html"><span>qbits.casyn.balancer.round-robin</span></a></li><li><a href="qbits.casyn.client.html"><span>qbits.casyn.client</span></a></li><li><a href="qbits.casyn.cluster.html"><span>qbits.casyn.cluster</span></a></li><li><a href="qbits.casyn.cluster.core.html"><span>qbits.casyn.cluster.core</span></a></li><li><a href="qbits.casyn.codecs.html"><span>qbits.casyn.codecs</span></a></li><li><a href="qbits.casyn.codecs.collection.html"><span>qbits.casyn.codecs.collection</span></a></li><li><a href="qbits.casyn.codecs.composite.html"><span>qbits.casyn.codecs.composite</span></a></li><li><a href="qbits.casyn.codecs.joda-time.html"><span>qbits.casyn.codecs.joda-time</span></a></li><li><a href="qbits.casyn.ddl.html"><span>qbits.casyn.ddl</span></a></li><li><a href="qbits.casyn.pool.html"><span>qbits.casyn.pool</span></a></li><li><a href="qbits.casyn.pool.commons.html"><span>qbits.casyn.pool.commons</span></a></li><li><a href="qbits.casyn.schema.html"><span>qbits.casyn.schema</span></a></li><li><a href="qbits.casyn.types.html"><span>qbits.casyn.types</span></a></li><li><a href="qbits.casyn.utils.html"><span>qbits.casyn.utils</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="qbits.casyn.html#var--%3EClient"><span>-&gt;Client</span></a></li><li><a href="qbits.casyn.html#var--%3ECluster"><span>-&gt;Cluster</span></a></li><li><a href="qbits.casyn.html#var--%3ESchema"><span>-&gt;Schema</span></a></li><li><a href="qbits.casyn.html#var-add-column-family"><span>add-column-family</span></a></li><li><a href="qbits.casyn.html#var-add-node"><span>add-node</span></a></li><li><a href="qbits.casyn.html#var-batch-mutate"><span>batch-mutate</span></a></li><li><a href="qbits.casyn.html#var-bytes-%3Eclojure"><span>bytes-&gt;clojure</span></a></li><li><a href="qbits.casyn.html#var-c*collection"><span>c*collection</span></a></li><li><a href="qbits.casyn.html#var-c*composite"><span>c*composite</span></a></li><li><a href="qbits.casyn.html#var-client-fn"><span>client-fn</span></a></li><li><a href="qbits.casyn.html#var-clj-%3Ecassandra-type"><span>clj-&gt;cassandra-type</span></a></li><li><a href="qbits.casyn.html#var-clojure-%3Ebyte-buffer"><span>clojure-&gt;byte-buffer</span></a></li><li><a href="qbits.casyn.html#var-cols-%3Emap"><span>cols-&gt;map</span></a></li><li><a href="qbits.casyn.html#var-column-family-definition"><span>column-family-definition</span></a></li><li><a href="qbits.casyn.html#var-composite-%3Ebytes-values"><span>composite-&gt;bytes-values</span></a></li><li><a href="qbits.casyn.html#var-composite-expression"><span>composite-expression</span></a></li><li><a href="qbits.casyn.html#var-composite-value"><span>composite-value</span></a></li><li><a href="qbits.casyn.html#var-decode"><span>decode</span></a></li><li><a href="qbits.casyn.html#var-decode-result"><span>decode-result</span></a></li><li><a href="qbits.casyn.html#var-defschema"><span>defschema</span></a></li><li><a href="qbits.casyn.html#var-delete"><span>delete</span></a></li><li><a href="qbits.casyn.html#var-delete-mutation"><span>delete-mutation</span></a></li><li><a href="qbits.casyn.html#var-describe-cluster-name"><span>describe-cluster-name</span></a></li><li><a href="qbits.casyn.html#var-describe-keyspace"><span>describe-keyspace</span></a></li><li><a href="qbits.casyn.html#var-describe-keyspaces"><span>describe-keyspaces</span></a></li><li><a href="qbits.casyn.html#var-describe-partitioner"><span>describe-partitioner</span></a></li><li><a href="qbits.casyn.html#var-describe-ring"><span>describe-ring</span></a></li><li><a href="qbits.casyn.html#var-describe-schema-versions"><span>describe-schema-versions</span></a></li><li><a href="qbits.casyn.html#var-describe-snitch"><span>describe-snitch</span></a></li><li><a href="qbits.casyn.html#var-describe-splits"><span>describe-splits</span></a></li><li><a href="qbits.casyn.html#var-describe-token-map"><span>describe-token-map</span></a></li><li><a href="qbits.casyn.html#var-describe-version"><span>describe-version</span></a></li><li><a href="qbits.casyn.html#var-drop-column-family"><span>drop-column-family</span></a></li><li><a href="qbits.casyn.html#var-drop-keyspace"><span>drop-keyspace</span></a></li><li><a href="qbits.casyn.html#var-encode"><span>encode</span></a></li><li><a href="qbits.casyn.html#var-execute-cql-query"><span>execute-cql-query</span></a></li><li><a href="qbits.casyn.html#var-execute-prepared-cql-query"><span>execute-prepared-cql-query</span></a></li><li><a href="qbits.casyn.html#var-get-balancer"><span>get-balancer</span></a></li><li><a href="qbits.casyn.html#var-get-column"><span>get-column</span></a></li><li><a href="qbits.casyn.html#var-get-count"><span>get-count</span></a></li><li><a href="qbits.casyn.html#var-get-indexed-slice"><span>get-indexed-slice</span></a></li><li><a href="qbits.casyn.html#var-get-options"><span>get-options</span></a></li><li><a href="qbits.casyn.html#var-get-pool"><span>get-pool</span></a></li><li><a href="qbits.casyn.html#var-get-range-slice"><span>get-range-slice</span></a></li><li><a href="qbits.casyn.html#var-get-row"><span>get-row</span></a></li><li><a href="qbits.casyn.html#var-get-rows"><span>get-rows</span></a></li><li><a href="qbits.casyn.html#var-get-slice"><span>get-slice</span></a></li><li><a href="qbits.casyn.html#var-increment"><span>increment</span></a></li><li><a href="qbits.casyn.html#var-insert-column"><span>insert-column</span></a></li><li><a href="qbits.casyn.html#var-keyspace-definition"><span>keyspace-definition</span></a></li><li><a href="qbits.casyn.html#var-login"><span>login</span></a></li><li><a href="qbits.casyn.html#var-make-client"><span>make-client</span></a></li><li><a href="qbits.casyn.html#var-make-cluster"><span>make-cluster</span></a></li><li><a href="qbits.casyn.html#var-map-%3ESchema"><span>map-&gt;Schema</span></a></li><li><a href="qbits.casyn.html#var-mark-as"><span>mark-as</span></a></li><li><a href="qbits.casyn.html#var-mget-count"><span>mget-count</span></a></li><li><a href="qbits.casyn.html#var-mget-slice"><span>mget-slice</span></a></li><li><a href="qbits.casyn.html#var-mutation"><span>mutation</span></a></li><li><a href="qbits.casyn.html#var-pack"><span>pack</span></a></li><li><a href="qbits.casyn.html#var-prepare-cql-query"><span>prepare-cql-query</span></a></li><li><a href="qbits.casyn.html#var-put"><span>put</span></a></li><li><a href="qbits.casyn.html#var-refresh"><span>refresh</span></a></li><li><a href="qbits.casyn.html#var-remove-node"><span>remove-node</span></a></li><li><a href="qbits.casyn.html#var-select-node"><span>select-node</span></a></li><li><a href="qbits.casyn.html#var-set-cql-version"><span>set-cql-version</span></a></li><li><a href="qbits.casyn.html#var-set-keyspace"><span>set-keyspace</span></a></li><li><a href="qbits.casyn.html#var-shutdown"><span>shutdown</span></a></li><li><a href="qbits.casyn.html#var-truncate"><span>truncate</span></a></li><li><a href="qbits.casyn.html#var-update-column-family"><span>update-column-family</span></a></li><li><a href="qbits.casyn.html#var-update-keyspace"><span>update-keyspace</span></a></li><li><a href="qbits.casyn.html#var-with-consistency"><span>with-consistency</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>qbits.casyn documentation</h2><pre class="doc">Alias most of the lib for convenience:
* qbits.casyn.client
* qbits.casyn.api
* qbits.casyn.schema
* qbits.casyn.ddl
* qbits.casyn.codecs
* qbits.casyn.codecs.composite
* qbits.casyn.cluster.core</pre><div class="public" id="var--%3EClient"><h3>-&gt;Client</h3><div class="usage"><code>(-&gt;Client thrift-client transport executor)</code></div><pre class="doc">Positional factory function for class qbits.casyn.client.Client.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/client.clj#L52">Source</a></div></div><div class="public" id="var--%3ECluster"><h3>-&gt;Cluster</h3><div class="usage"><code>(-&gt;Cluster balancer pool cf-pool auto-discovery-worker options)</code></div><pre class="doc">Positional factory function for class qbits.casyn.cluster.core.Cluster.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/cluster/core.clj#L22">Source</a></div></div><div class="public" id="var--%3ESchema"><h3>-&gt;Schema</h3><div class="usage"><code>(-&gt;Schema name row super columns)</code></div><pre class="doc">Positional factory function for class qbits.casyn.schema.Schema.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/schema.clj#L15">Source</a></div></div><div class="public" id="var-add-column-family"><h3>add-column-family</h3><div class="usage"><code>(add-column-family client &amp; cf-args)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/ddl.clj#L159">Source</a></div></div><div class="public" id="var-add-node"><h3>add-node</h3><div class="usage"><code>(add-node cluster node)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-batch-mutate"><h3>batch-mutate</h3><div class="usage"><code>(batch-mutate client mutations &amp; {:keys [consistency atomic?]})</code></div><pre class="doc">Executes the specified mutations on the keyspace.
Expects a collection of mutation specs, every mutation is a vector of

[column-family, row-id, mutation instance]:

Example:
[[&quot;cf&quot; &quot;row-2&quot; (mutation &quot;col-name&quot; &quot;col-value&quot;)]
 [&quot;cf&quot; &quot;row-1&quot; (delete-mutation :columns [&quot;col-name&quot;])]]

Optional kw args:
:consistency : optional consistency-level, defaults to :one
:atomic? write to the batchlog before attempting distribution to the batch rows
replicas for details see: https://issues.apache.org/jira/browse/CASSANDRA-4542</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L481">Source</a></div></div><div class="public" id="var-bytes-%3Eclojure"><h3>bytes-&gt;clojure</h3><div class="usage"></div><pre class="doc">Decode byte arrays from schema type definitions
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/codecs.clj#L90">Source</a></div></div><div class="public" id="var-c*collection"><h3>c*collection</h3><div class="usage"><code>(c*collection x)</code></div><pre class="doc">Marks a clojure value as cassandra native collection for encoding
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/codecs/collection.clj#L10">Source</a></div></div><div class="public" id="var-c*composite"><h3>c*composite</h3><div class="usage"><code>(c*composite x)</code></div><pre class="doc">Mark a column value|name|key value as composite
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/codecs/composite.clj#L79">Source</a></div></div><div class="public" id="var-client-fn"><h3>client-fn</h3><div class="usage"><code>(client-fn cluster &amp; {:keys [client-timeout failover], :or {client-timeout (:client-timeout (c/get-options cluster)), failover (:failover (c/get-options cluster))}})</code></div><pre class="doc">Returns a fn that will execute its first arg against the rest of
args. handles the client borrow/return/sanity/timeouts checks,
returns a result-channel.

Optional kw args:
  :client-timeout is in ms
  :failover can be :try-all, or :try-next, disabled by default,
 inherits cluster settings</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/client.clj#L180">Source</a></div></div><div class="public" id="var-clj-%3Ecassandra-type"><h3>clj-&gt;cassandra-type</h3><div class="usage"><code>(clj-&gt;cassandra-type td)</code></div><pre class="doc">Converts a clj friendly type def to a proper cassandra type
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-clojure-%3Ebyte-buffer"><h3>clojure-&gt;byte-buffer</h3><div class="usage"><code>(clojure-&gt;byte-buffer v)</code></div><pre class="doc">Converts from clojure types to byte-buffers
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-cols-%3Emap"><h3>cols-&gt;map</h3><div class="usage"><code>(cols-&gt;map cols)</code></div><pre class="doc">Turns a collection of columns into an array-map with column name mapped to key
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/schema.clj#L9">Source</a></div></div><div class="public" id="var-column-family-definition"><h3>column-family-definition</h3><div class="usage"><code>(column-family-definition ks-name cf-name &amp; {:keys [cf-type comparator-type default-validation-class key-validation-class replicate-on-write column-metadata]})</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/ddl.clj#L89">Source</a></div></div><div class="public" id="var-composite-%3Ebytes-values"><h3>composite-&gt;bytes-values</h3><div class="usage"><code>(composite-&gt;bytes-values ba)</code></div><pre class="doc">Takes a composite byte-array returned by thrift and transforms it
to a collection of byte-arrays holding actual values for decoding</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/codecs/composite.clj#L50">Source</a></div></div><div class="public" id="var-composite-expression"><h3>composite-expression</h3><div class="usage"><code>(composite-expression &amp; values)</code></div><pre class="doc">Takes a sequence of values pairs holding operator and actual clojure value to
be encoded as a composite type. Returns a ByteBuffer
ex: (composite-expression [:eq? 12] [:gt? &quot;meh&quot;] [:lt? 12])</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/codecs/composite.clj#L63">Source</a></div></div><div class="public" id="var-composite-value"><h3>composite-value</h3><div class="usage"><code>(composite-value raw-value suffix)</code></div><pre class="doc">Create a composite value as a ByteBuffer from a raw clojure value
and a composite operator</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/codecs/composite.clj#L38">Source</a></div></div><div class="public" id="var-decode"><h3>decode</h3><div class="usage"><code>(decode this bytes spec)</code></div><pre class="doc">Decodes Cassandra collection from bytes to clojure value
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-decode-result"><h3>decode-result</h3><div class="usage"><code>(decode-result result schema)</code><code>(decode-result result schema as)</code></div><pre class="doc">Decodes a result according to supplied schema
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-defschema"><h3>defschema</h3><h4 class="macro">macro</h4><div class="usage"><code>(defschema name &amp; {:keys [row super columns]})</code></div><pre class="doc">Create a var holding a Schema instance to be used as an argument to
decode-result. TODO: add schema sync such as ks/sc/c definitions</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/schema.clj#L16">Source</a></div></div><div class="public" id="var-delete"><h3>delete</h3><div class="usage"><code>(delete client cf row-key &amp; {:keys [column super timestamp consistency type]})</code></div><pre class="doc">Delete column(s), works on regular columns or counters.

Optional kw args:
  :type (keyword): Represents the column type, defaults :column can also be :counter, :super
  :super :  used as the super column name if specified
  :ttl (integer): Allows to specify the Time to live value for the column
  :timestamp (long): Allows to specify the Timestamp for the column
                       (in nanosecs), defaults to the value for the current time
  :consistency : optional consistency-level, defaults to :one</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L456">Source</a></div></div><div class="public" id="var-delete-mutation"><h3>delete-mutation</h3><div class="usage"><code>(delete-mutation &amp; {:keys [super], :as opts})</code></div><pre class="doc">To be used with qbits.casyn.api/batch-mutate.
Accepts optional slice-predicate arguments :columns, :start, :finish, :count,
:reversed?, if you specify :columns the other slice args will be ignored (as
defined by thrift)

Optional kw args:
  :super : optional super column name
  :start : The column name to start the slice with.
  :finish : The column name to stop the slice at
  :reversed? (bool): Whether the results should be ordered in reversed order.
  :count : How many columns to return, defaults to 100
  :columns: A list of column names to retrieve</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L256">Source</a></div></div><div class="public" id="var-describe-cluster-name"><h3>describe-cluster-name</h3><div class="usage"><code>(describe-cluster-name client)</code></div><pre class="doc">Gets the name of the cluster.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L578">Source</a></div></div><div class="public" id="var-describe-keyspace"><h3>describe-keyspace</h3><div class="usage"><code>(describe-keyspace client ks)</code></div><pre class="doc">Gets information about the specified keyspace.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L583">Source</a></div></div><div class="public" id="var-describe-keyspaces"><h3>describe-keyspaces</h3><div class="usage"><code>(describe-keyspaces client)</code></div><pre class="doc">Gets a list of all the keyspaces configured for the cluster.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L588">Source</a></div></div><div class="public" id="var-describe-partitioner"><h3>describe-partitioner</h3><div class="usage"><code>(describe-partitioner client)</code></div><pre class="doc">Gets the name of the partitioner for the cluster.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L593">Source</a></div></div><div class="public" id="var-describe-ring"><h3>describe-ring</h3><div class="usage"><code>(describe-ring client ks)</code></div><pre class="doc">Gets the token ring; a map of ranges to host addresses. Represented
as a set of TokenRange instead of a map from range to list of
endpoints, because you can't use Thrift structs as map keys:
https://issues.apache.org/jira/browse/THRIFT-162 for the same
reason, we can't return a set here, even though order is neither
important nor predictable.</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L598">Source</a></div></div><div class="public" id="var-describe-schema-versions"><h3>describe-schema-versions</h3><div class="usage"><code>(describe-schema-versions client)</code></div><pre class="doc">For each schema version present in the cluster, returns a list of
nodes at that version. Hosts that do not respond will be under the
key DatabaseDescriptor.INITIAL_VERSION. The cluster is all on the
same version if the size of the map is 1</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L608">Source</a></div></div><div class="public" id="var-describe-snitch"><h3>describe-snitch</h3><div class="usage"><code>(describe-snitch client)</code></div><pre class="doc">Gets the name of the snitch used for the cluster.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L616">Source</a></div></div><div class="public" id="var-describe-splits"><h3>describe-splits</h3><div class="usage"><code>(describe-splits client cf start-token end-token keys-per-split)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L621">Source</a></div></div><div class="public" id="var-describe-token-map"><h3>describe-token-map</h3><div class="usage"><code>(describe-token-map client)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L629">Source</a></div></div><div class="public" id="var-describe-version"><h3>describe-version</h3><div class="usage"><code>(describe-version client)</code></div><pre class="doc">Gets the Thrift API version.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L634">Source</a></div></div><div class="public" id="var-drop-column-family"><h3>drop-column-family</h3><div class="usage"><code>(drop-column-family client cf-name)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/ddl.clj#L175">Source</a></div></div><div class="public" id="var-drop-keyspace"><h3>drop-keyspace</h3><div class="usage"><code>(drop-keyspace client ks-name)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/ddl.clj#L153">Source</a></div></div><div class="public" id="var-encode"><h3>encode</h3><div class="usage"><code>(encode this)</code></div><pre class="doc">Encodes a clojure coll to Cassandra bytes value
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-execute-cql-query"><h3>execute-cql-query</h3><div class="usage"><code>(execute-cql-query client query &amp; {:keys [schema as]})</code></div><pre class="doc">Executes a CQL (Cassandra Query Language) statement.
Optional kw args:
  :schema : schema used for result decoding
  :as : as format (if nil it will return casyn types,
              if :map it will try to turn collections to maps</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L653">Source</a></div></div><div class="public" id="var-execute-prepared-cql-query"><h3>execute-prepared-cql-query</h3><div class="usage"><code>(execute-prepared-cql-query client item-id values &amp; {:keys [schema as]})</code></div><pre class="doc">Executes a prepared CQL (Cassandra Query Language) statement by
  passing an id token and a list of variables to bind.

Optional kw args:
  :schema : schema used for result decoding
  :as : as format (if nil it will return casyn types,
              if :map it will try to turn collections to maps</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L667">Source</a></div></div><div class="public" id="var-get-balancer"><h3>get-balancer</h3><div class="usage"><code>(get-balancer cluster)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-get-column"><h3>get-column</h3><div class="usage"><code>(get-column client cf row-key col &amp; {:keys [super consistency schema as]})</code></div><pre class="doc">Returns a single column.
Optional kw args:
  :consistency : optional consistency-level, defaults to :one
  :super : optional super column name
  :schema : schema used for result decoding
  :as : ouput format (if nil it will return casyn types,
              if :map it will try to turn collections to maps</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L292">Source</a></div></div><div class="public" id="var-get-count"><h3>get-count</h3><div class="usage"><code>(get-count client cf row-key &amp; {:keys [super consistency schema as], :as opts})</code></div><pre class="doc">Accepts optional slice-predicate arguments :columns, :start, :finish, :count,
:reversed?, if you specify :columns the other slice args will be ignored (as
defined by the cassandra api).

Optional kw args:
  :super : optional super column name
  :start : The column name to start the slice with.
  :finish : The column name to stop the slice at
  :reversed? (bool): Whether the results should be ordered in reversed order.
  :count : How many columns to return, defaults to 100
  :columns: A list of column names to retrieve
  :consistency : optional consistency-level, defaults to :one
  :schema : schema used for result decoding
  :as : as format (if nil it will return casyn types,
              if :map it will try to turn collections to maps</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L363">Source</a></div></div><div class="public" id="var-get-indexed-slice"><h3>get-indexed-slice</h3><div class="usage"><code>(get-indexed-slice client cf index-clause-args &amp; {:keys [super consistency schema as], :as opts})</code></div><pre class="doc">Accepts optional slice-predicate arguments :columns, :start, :finish, :count,
:reversed?, if you specify :columns the other slice args will be ignored (as
defined by the cassandra api).

Optional kw args:
  :super :  used as the super column name if specified
  :start : The column name to start the slice with.
  :finish : The column name to stop the slice at
  :reversed? (bool): Whether the results should be ordered in reversed order.
  :count : How many columns to return, defaults to 100
  :columns: A list of column names to retrieve

  :consistency : optional consistency-level, defaults to :one
  :schema : schema used for result decoding
  :as : as format (if nil it will return casyn types,
              if :map it will try to turn collections to maps</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L545">Source</a></div></div><div class="public" id="var-get-options"><h3>get-options</h3><div class="usage"><code>(get-options cluster)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-get-pool"><h3>get-pool</h3><div class="usage"><code>(get-pool cluster)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-get-range-slice"><h3>get-range-slice</h3><div class="usage"><code>(get-range-slice client cf &amp; {:keys [super consistency schema as], :as opts})</code></div><pre class="doc">Accepts optional slice-predicate arguments :columns, :start, :finish, :count,
:reversed?, if you specify :columns the other slice args will be ignored (as
defined by the cassandra api). Accepts optional key-range arguments :start-token
:start-key :end-token :end-key :count-key :row-filter (vector of index-expressions).

Optional kw args:
  :super :  used as the super column name if specified
  :start : The column name to start the slice with.
  :finish : The column name to stop the slice at
  :reversed? (bool): Whether the results should be ordered in reversed order.
  :count : How many columns to return, defaults to 100
  :columns: A list of column names to retrieve

  :start-token : The first token in the exclusive KeyRange.
  :end-token : The last token in the exclusive KeyRange.
  :start-key: The first key in the inclusive KeyRange.
  :end-key : The last key in the inclusive KeyRange.
  :row-count : The total number of keys to permit in the KeyRange.
  :row-filter: The list of index expressions vectors

  :consistency : optional consistency-level, defaults to :one
  :schema : schema used for result decoding
  :as : as format (if nil it will return casyn types,
              if :map it will try to turn collections to maps</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L509">Source</a></div></div><div class="public" id="var-get-row"><h3>get-row</h3><div class="usage"></div><pre class="doc">Alias to get-slice
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L710">Source</a></div></div><div class="public" id="var-get-rows"><h3>get-rows</h3><div class="usage"></div><pre class="doc">Alias to mget-slice
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L709">Source</a></div></div><div class="public" id="var-get-slice"><h3>get-slice</h3><div class="usage"><code>(get-slice client cf row-key &amp; {:keys [super consistency schema as], :as opts})</code></div><pre class="doc">Returns a slice of columns. Accepts optional slice-predicate arguments :columns, :start, :finish, :count,
:reversed?, if you specify :columns the other slice args will be ignored (as defined by the cassandra api).

Optional kw args:
  :super : optional super column name
  :start : The column name to start the slice with.
  :finish : The column name to stop the slice at
  :reversed? (bool): Whether the results should be ordered in reversed order.
  :count : How many columns to return, defaults to 100
  :columns: A list of column names to retrieve
  :consistency : optional consistency-level, defaults to :one
  :schema : schema used for result decoding
  :as : as format (if nil it will return casyn types,
              if :as-map it will try to turn collections to maps</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L309">Source</a></div></div><div class="public" id="var-increment"><h3>increment</h3><div class="usage"><code>(increment client cf row-key column-name value &amp; {:keys [super consistency]})</code></div><pre class="doc">Increment the specified counter column value.

Optional kw args:
  :super : this argument will be used as the super column name if specified
  :consistency : optional consistency-level, defaults to :one</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L441">Source</a></div></div><div class="public" id="var-insert-column"><h3>insert-column</h3><div class="usage"><code>(insert-column client cf row-key name value &amp; {:keys [super type consistency ttl timestamp], :or {type :column}})</code></div><pre class="doc">Inserts a single column.

Optional kw args:
  :type (keyword): Represents the column type, defaults :column can also be :counter, :super
  :super : if type if :super this argument will be used as the super column name
  :ttl (integer): Allows to specify the Time to live value for the column
  :timestamp (long): Allows to specify the Timestamp for the column
                       (in nanosecs), defaults to the value for the current time
  :consistency : optional consistency-level, defaults to :one</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L417">Source</a></div></div><div class="public" id="var-keyspace-definition"><h3>keyspace-definition</h3><div class="usage"><code>(keyspace-definition ks-name strategy-class column-family-definitions &amp; {:keys [durable-writes strategy-options]})</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/ddl.clj#L117">Source</a></div></div><div class="public" id="var-login"><h3>login</h3><div class="usage"><code>(login client auth-req)</code></div><pre class="doc">Expect an AuthenticationRequest instance as argument
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L282">Source</a></div></div><div class="public" id="var-make-client"><h3>make-client</h3><div class="usage"><code>(make-client &amp; {:keys [host port pool timeout executor], :or {host &quot;127.0.0.1&quot;, port 9160, pool default-factory-pool, timeout 0, executor default-executor}})</code></div><pre class="doc">Returns a casyn Client instance, wrapping a thirft client and an executor

Optional kw args:
 :host (default: localhost): Node host
 :port (default: 9160): Node port
 :pool (default: default-factory-pool -&gt; pool of size 3
   Cassandra$AsyncClient$Factory pool to get the client from (1
   selector thread per factory), you can create yoru own
   using `(qbits.casyn.client/client-factory-pool Nthreads) `
 :timeout : Thrift client timeout in ms
 :executor (default: qbits.casyn.client/default-executor): An ExecutorService to
   be used for callback execution</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/client.clj#L78">Source</a></div></div><div class="public" id="var-make-cluster"><h3>make-cluster</h3><div class="usage"><code>(make-cluster hosts port keyspace &amp; options)</code></div><pre class="doc">Returns a cluster instance, this will be used to spawn client-fns and set
defaults configurations for nodes balancer, client timeouts, nodes discovery,
and manage the selector threads pool.

hosts can be a sequence or a single value, port will be the same for
all the hosts, you can manage a fixed sized cluster with predetermined
ips by turning auto-discovery off.

  options are:

   :auto-discovery? -&gt; true (updates balancer with new/lost nodes)

   :load-balancer-strategy -&gt; :round-robin or :least-loaded (sets balancer strategy)

   :num-selector-threads -&gt; 3 (numer of Selector Threads to be used by clients)

   :callback-executor -&gt; Task Executor on which the callbacks will run, defaults to a newCachedThreadPool

   :client-timeout -&gt; Timeout on thrift clients

   :pool -&gt; see qbits.casyn.pool.commons/make-pool options</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/cluster/core.clj#L63">Source</a></div></div><div class="public" id="var-map-%3ESchema"><h3>map-&gt;Schema</h3><div class="usage"><code>(map-&gt;Schema m__5665__auto__)</code></div><pre class="doc">Factory function for class qbits.casyn.schema.Schema, taking a map of keywords to field values.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/schema.clj#L15">Source</a></div></div><div class="public" id="var-mark-as"><h3>mark-as</h3><div class="usage"><code>(mark-as x type-key)</code></div><pre class="doc">Marks a value as a Cassandra native (composite, collection and
possibly others in the future)</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/codecs.clj#L121">Source</a></div></div><div class="public" id="var-mget-count"><h3>mget-count</h3><div class="usage"><code>(mget-count client cf row-keys &amp; {:keys [super consistency schema as], :as opts})</code></div><pre class="doc">Accepts optional slice-predicate arguments :columns, :start, :finish, :count,
:reversed?, if you specify :columns the other slice args will be ignored (as
defined by the cassandra api).

Optional kw args:
  :super : optional super column name
  :start : The column name to start the slice with.
  :finish : The column name to stop the slice at
  :reversed? (bool): Whether the results should be ordered in reversed order.
  :count : How many columns to return, defaults to 100
  :columns: A list of column names to retrieve
  :consistency : optional consistency-level, defaults to :one
  :schema : schema used for result decoding
  :as : as format (if nil it will return casyn types,
              if :map it will try to turn collections to maps</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L390">Source</a></div></div><div class="public" id="var-mget-slice"><h3>mget-slice</h3><div class="usage"><code>(mget-slice client cf row-keys &amp; {:keys [super consistency schema as], :as opts})</code></div><pre class="doc">Returns a collection of slices of columns.
   Accepts optional slice-predicate
   arguments :columns, :start, :finish, :count, :reversed?, if you
   specify :columns the other slice args will be ignored (as defined by the cassandra api)

Optional kw args:
  :super : optional super column name
  :start : The column name to start the slice with.
  :finish : The column name to stop the slice at
  :reversed? (bool): Whether the results should be ordered in reversed order.
  :count : How many columns to return, defaults to 100
  :columns: A list of column names to retrieve
  :consistency : optional consistency-level, defaults to :one
  :schema : schema used for result decoding
  :as : as format (if nil it will return casyn types,
              if :map it will try to turn collections to maps</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L335">Source</a></div></div><div class="public" id="var-mutation"><h3>mutation</h3><div class="usage"><code>(mutation name value &amp; {:keys [type ttl timestamp]})</code></div><pre class="doc">To be used with qbits.casyn.api/batch-mutate.
Takes column name, and value + optional :type that can have the
following  values :column (default) :super :counter :counter-super. :ttl
and :timestamp options are also available when dealing with super or
regular columns, otherwise ignored.

Optional kw args:
  :type (keyword): Represents the column type
                     defaults :column can also be :counter :super :counter-super
  :ttl (integer): Allows to specify the Time to live value for the column
  :timestamp (long): Allows to specify the Timestamp for the column
                       (in nanosecs), defaults to the value for the current time</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L220">Source</a></div></div><div class="public" id="var-pack"><h3>pack</h3><div class="usage"><code>(pack bbs elements size)</code></div><pre class="doc">Packs a collection of buffers into a single value
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/codecs/collection.clj#L22">Source</a></div></div><div class="public" id="var-prepare-cql-query"><h3>prepare-cql-query</h3><div class="usage"><code>(prepare-cql-query client query)</code></div><pre class="doc">Prepare a CQL (Cassandra Query Language) statement by compiling and returning
a qbits.casyn.types.CqlPreparedResult instance</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L644">Source</a></div></div><div class="public" id="var-put"><h3>put</h3><div class="usage"><code>(put client cf row-key columns &amp; {:keys [consistency type]})</code></div><pre class="doc">Accepts cols as vectors or maps to be applied to cols
  constructors (use maps for simple key vals, use vectors if you need
  to set mutations options:

Optional kw args for mutations when passed as vectors:
  :type (keyword): Represents the column type
                     defaults :column can also be :counter :super :counter-super
  :ttl (integer): Allows to specify the Time to live value for the column
  :timestamp (long): Allows to specify the Timestamp for the column
                       (in nanosecs), defaults to the value for the current time</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L689">Source</a></div></div><div class="public" id="var-refresh"><h3>refresh</h3><div class="usage"><code>(refresh cluster nodes)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-remove-node"><h3>remove-node</h3><div class="usage"><code>(remove-node cluster node)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-select-node"><h3>select-node</h3><div class="usage"><code>(select-node cluster avoid-node-set)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-set-cql-version"><h3>set-cql-version</h3><div class="usage"><code>(set-cql-version client version)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L639">Source</a></div></div><div class="public" id="var-set-keyspace"><h3>set-keyspace</h3><div class="usage"><code>(set-keyspace client ks)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L287">Source</a></div></div><div class="public" id="var-shutdown"><h3>shutdown</h3><div class="usage"><code>(shutdown cluster)</code></div><pre class="doc">Release cluster ressources (pools, executors etc)
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/#L">Source</a></div></div><div class="public" id="var-truncate"><h3>truncate</h3><div class="usage"><code>(truncate client cf)</code></div><pre class="doc">Removes all the rows from the given column family.
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L573">Source</a></div></div><div class="public" id="var-update-column-family"><h3>update-column-family</h3><div class="usage"><code>(update-column-family client &amp; cf-args)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/ddl.clj#L167">Source</a></div></div><div class="public" id="var-update-keyspace"><h3>update-keyspace</h3><div class="usage"><code>(update-keyspace client ks-name strategy-class column-family-defs &amp; more)</code></div><pre class="doc">
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/ddl.clj#L141">Source</a></div></div><div class="public" id="var-with-consistency"><h3>with-consistency</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-consistency consistency &amp; body)</code></div><pre class="doc">Binds consistency level for the enclosed body
</pre><div class="src-link"><a href="https://github.com/mpenet/casyn/blob/master/src/qbits/casyn/api.clj#L43">Source</a></div></div></div></body></html>